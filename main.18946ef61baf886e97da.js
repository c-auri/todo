(()=>{"use strict";function t(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(n){t(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===e(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var i,a,c,l,u=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};let d=0;class f{constructor(e,s,a,c,l=undefined){if(i.add(this),this.id=void 0===l?++d:l,this.title=e,this.description=s,c){const[e,s]=c.split(":").map((t=>+t));this.date=function(e,s){if(t(2,arguments),"object"!==o(s)||null===s)throw new RangeError("values parameter must be an object");var i=n(e);return isNaN(i.getTime())?new Date(NaN):(null!=s.year&&i.setFullYear(s.year),null!=s.month&&(i=function(e,o){t(2,arguments);var s=n(e),i=r(o),a=s.getFullYear(),c=s.getDate(),l=new Date(0);l.setFullYear(a,i,15),l.setHours(0,0,0,0);var u=function(e){t(1,arguments);var r=n(e),o=r.getFullYear(),s=r.getMonth(),i=new Date(0);return i.setFullYear(o,s+1,0),i.setHours(0,0,0,0),i.getDate()}(l);return s.setMonth(i,Math.min(c,u)),s}(i,s.month)),null!=s.date&&i.setDate(r(s.date)),null!=s.hours&&i.setHours(r(s.hours)),null!=s.minutes&&i.setMinutes(r(s.minutes)),null!=s.seconds&&i.setSeconds(r(s.seconds)),null!=s.milliseconds&&i.setMilliseconds(r(s.milliseconds)),i)}(a,{hours:e,minutes:s})}else this.date=a;this.time=c}get dueDateString(){return function(e){if(t(1,arguments),!function(e){return t(1,arguments),e instanceof Date||"object"===s(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var r=n(e);return!isNaN(Number(r))}(this.date)?this.date.toLocaleString([],u(this,i,"a",c)):""}toJSON(){return{id:this.id,title:this.title,description:this.description,date:this.date.toJSON(),time:this.time}}static fromJSON(t){return JSON.parse(t,u(this,a,"m",l))}}a=f,i=new WeakSet,c=function(){return{year:"2-digit",month:"2-digit",day:"2-digit",hour:this.time?"2-digit":void 0,minute:this.time?"2-digit":void 0}},l=function(e,r){switch(e){case"":const e=r;return new f(e.title,e.description,e.date,e.time,e.id);case"date":return function(e){if(t(1,arguments),"string"==typeof e){var r=e.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return r?new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4]-(+r[9]||0)*("-"==r[8]?-1:1),+r[5]-(+r[10]||0)*("-"==r[8]?-1:1),+r[6],+((r[7]||"0")+"00").substring(0,3))):new Date(NaN)}return n(e)}(r);default:return r}};const m='<form method="dialog" class="border p-4 rounded-4"> <div class="mb-3"> <span class="h3 fw-bold">New Task</span> </div> <div class="form-floating mb-3"> <input type="text" class="form-control" id="new-task__title" placeholder="Title"> <label class="form-label" for="new-task__title">Title</label> </div> <div class="input-group"> <span class="form-floating mb-3"> <input type="date" class="form-control" id="new-task__date"> <label class="form-label" for="new-task__date">Due Date</label> </span> <span class="form-floating mb-3"> <input type="time" class="form-control" id="new-task__time"> <label class="form-label" for="new-task__time">Time</label> </span> </div> <div class="form-floating mb-3"> <div clasS="form-floating"></div> <textarea class="form-control" id="new-task__description" placeholder="Description" style="height:8rem"></textarea> <label class="form-label" for="new-task__description">Description</label> </div> <div> <button class="btn btn-primary" id="new-task__confirm-btn" value="add">Add task</button> <button class="btn btn-outline-secondary">Cancel</button> </div> </form>';const p='<div class="row align-items-start justify-content-between"> <span class="col-1 pt-1"> <input type="checkbox" class="form-check-input"> </span> <div class="col"> <div id="task__title" class="fw-semibold"></div> <div id="task__duedate" class="text-secondary"></div> <div id="task__description" class="mb-3"></div> </div> <span class="col-1 pt-1" id="task__button-group"> <button class="btn btn-light">x</button> </span> </div>';function b(t){const e=document.querySelector("main"),n=function(t){const e=document.createElement("ul");e.classList.add("mb-4","list-group","list-group-flush"),t.isEmpty||e.classList.add("border-top","border-bottom");for(const n of t.tasks)e.appendChild(h(n));return e}(t),r=function(){const t=document.createElement("dialog");return t.classList.add("border","rounded-4"),t.innerHTML=m,t.style.width="min(100vw, 28rem)",t.addEventListener("close",(()=>function(t){const e=t.querySelector("#new-task__title"),n=t.querySelector("#new-task__description"),r=t.querySelector("#new-task__date"),o=t.querySelector("#new-task__time");if("add"===t.returnValue){const t=e.value,s=n.value,i=r.value,a=o.value;t&&function(t){const e=E.getProject();e.add(t),b(e),E.setProject(e)}(new f(t,s,new Date(i),a))}e.value="",r.value=""}(t))),t}(),o=function(t){const e=document.createElement("button");return e.id="new-task__btn",e.classList.add("btn"),e.classList.add("btn-primary"),e.innerHTML="Add New Task",e.addEventListener("click",(()=>t.showModal())),e}(r);e.innerHTML="",e.appendChild(n),e.appendChild(r),e.appendChild(o)}function h(t){const e=document.createElement("li");return e.classList.add("list-group-item"),e.setAttribute("data-id",""+t.id),e.innerHTML=p,e.querySelector("#task__title").textContent=t.title,e.querySelector("#task__duedate").textContent=t.dueDateString,e.querySelector("#task__description").textContent=t.description,e.querySelector("button").addEventListener("click",(()=>function(t){const e=E.getProject();e.remove(t),b(e),E.setProject(e)}(t.id))),e}var y,w,g,v,S=function(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n},_=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class k{constructor(t,e=[]){w.set(this,void 0),g.set(this,void 0),S(this,w,t,"f"),S(this,g,e,"f")}get title(){return _(this,w,"f")}get tasks(){return _(this,g,"f")}get isEmpty(){return 0===_(this,g,"f").length}add(t){_(this,g,"f").push(t)}remove(t){const e=_(this,g,"f").findIndex((e=>e.id===t));if(-1===e)throw Error("Trying to delete a Task that does not exist in this project.");_(this,g,"f").splice(e,1)}toJSON(){return{title:_(this,w,"f"),tasks:_(this,g,"f")}}static fromJSON(t){return JSON.parse(t,_(this,y,"m",v))}}y=k,w=new WeakMap,g=new WeakMap,v=function(t,e){switch(t){case"":const t=e;return new k(t.title,t.tasks);case"tasks":return e.map((t=>f.fromJSON(JSON.stringify(t))));default:return e}};var N,j,T,D=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};let E;N=new WeakSet,j=function(){return!!localStorage.getItem("currentProject")},T=function(){const t=new k("Inbox");localStorage.setItem("currentProject",JSON.stringify(t))},E=new class{constructor(){N.add(this),D(this,N,"m",j).call(this)||D(this,N,"m",T).call(this)}getProject(){const t=localStorage.getItem("currentProject");return k.fromJSON(t)}setProject(t){localStorage.setItem("currentProject",JSON.stringify(t))}},b(E.getProject())})();